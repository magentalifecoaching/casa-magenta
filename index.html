<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casa Magenta | Tareas</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">
    
</head>
<body>

    <main class="container">
        <header class="no-print">
            <h1>CASA MAGENTA</h1>
            <p id="fecha-actual">Cargando fecha...</p>
            <div id="pausa-activa-banner" class="pausa-activa-banner"></div>
        </header>

        <section class="activities-section no-print">
            <h3>¬øNo sabes que hacer? ¬°No te preocupes!</h3>
            <p class="small-text" style="text-align: center; margin-top: -10px; margin-bottom: 15px;">
                Haz clic en una tarea para ver su descripci√≥n detallada.
            </p>
            <div id="activities-container" class="activities-grid">
                </div>
        </section>

                <hr class="divider no-print">
        
                        <section id="time-clock-section" class="time-clock-section no-print">
                            <button id="btn-abrir-fichaje" class="btn-time-clock"><span class="button_top">üïí Registrar Horario</span></button>
                            <div id="status-bar" class="status-bar"></div>
                        </section>        
                <section class="admin-panel no-print">
                    
                    <div class="controls-row">
                         <button class="btn-stats" onclick="mostrarEstadisticas()"><span class="button_top">üìä ESTAD√çSTICAS</span></button>
                         <button onclick="mostrarUniformes()"><span class="button_top">üëï UNIFORMES</span></button>
                         <button onclick="abrirConsolaAdministrativa()"><span class="button_top">üîê CONSOLA ADMINISTRATIVA</span></button>
                    </div>
                    
                    <div class="dashed-line"></div>
        
                    <div id="team-filters" class="filter-row">
                        <span class="loading-text">Cargando equipo...</span>
                    </div>
        
                    <div class="dashed-line"></div>
        
                    <div class="controls-row">
                        <button id="btn-view-weekly" class="btn-view active" onclick="cambiarVista('weekly')"><span class="button_top">üìÇ VISTA SEMANAL</span></button>
                        <button id="btn-view-calendar" class="btn-view" onclick="cambiarVista('calendar')"><span class="button_top">üìÖ VISTA CALENDARIO</span></button>

                        <button id="btn-print" onclick="window.print()" style="display:none;"><span class="button_top">üñ®Ô∏è IMPRIMIR</span></button>
                    </div>
                    
                </section>
        
                <section id="stats-section" class="stats-section" style="display:none;">
                    <h3>Estad√≠sticas de Equidad</h3>
                    <div id="stats-container"></div>
                </section>
        
                <div id="contenedor-principal" class="view-container">
                    <div class="loading">Cargando datos...</div>
                </div>
        
            </main>
        
            <dialog id="task-modal">
                <form method="dialog">
                    <h2 id="modal-title">T√≠tulo</h2>
                    <p id="modal-desc">Descripci√≥n</p>
                    <button><span class="button_top">ENTENDIDO</span></button>
                </form>
            </dialog>
        
                            <dialog id="fichaje-modal" class="wide-modal">
                                <div class="modal-content time-log-view">
                                    <h2>Registro de Horarios</h2>

                                    <div class="fichaje-top-row">
                                        <div class="fichaje-select">
                                            <label for="select-fichaje-persona">Persona:</label>
                                            <select id="select-fichaje-persona" class="neo-select">
                                                <option value="">-- Selecciona --</option>
                                            </select>
                                        </div>
                                        <div id="time-clock-controls" class="fichaje-buttons">
                                            <button id="btn-entrada" class="btn-time-in"><span class="button_top">‚úîÔ∏è Entrada</span></button>
                                            <button id="btn-inicio-almuerzo" class="btn-time-lunch"><span class="button_top">ü•™ Almuerzo</span></button>
                                            <button id="btn-fin-almuerzo" class="btn-time-lunch-end"><span class="button_top">üç¥ Fin Alm.</span></button>
                                            <button id="btn-salida" class="btn-time-out"><span class="button_top">üö™ Salida</span></button>
                                        </div>
                                    </div>

                                    <div class="dashed-line"></div>

                                    <div class="week-nav">
                                        <button onclick="window.navegarSemanaRegistros(-1)"><span class="button_top">‚óÄ</span></button>
                                        <span id="week-range-label" class="week-label">Cargando...</span>
                                        <button onclick="window.navegarSemanaRegistros(0)"><span class="button_top">üìÖ HOY</span></button>
                                        <button onclick="window.navegarSemanaRegistros(1)"><span class="button_top">‚ñ∂</span></button>
                                    </div>

                                    <div id="status-indicators"></div>
                                    <div id="time-log-filters" class="filter-row"></div>
                                    <div id="time-log-content">Cargando registros...</div>

                                    <div class="modal-actions">
                                        <button onclick="window.imprimirRegistros()" class="btn-info"><span class="button_top">üñ®Ô∏è IMPRIMIR</span></button>
                                        <button onclick="document.getElementById('fichaje-modal').close()" class="btn-cancel"><span class="button_top">CERRAR</span></button>
                                    </div>
                                </div>
                            </dialog>        			    <dialog id="admin-modal">
        <div class="modal-content">
            <h2 id="admin-title">Acciones de Administrador</h2>
            
            <div id="admin-extra-field-add" class="admin-extra-field" style="display: none;">
                <label>Nombre nuevo:</label>
                <input type="text" id="input-nuevo-nombre" placeholder="Ej: Santiago">
            </div>

            <div id="admin-extra-field-delete" class="admin-extra-field" style="display: none;">
                <label>Selecciona a qui√©n eliminar:</label>
                <select id="select-colaborador-eliminar" class="neo-select">
                    <option value="">Cargando lista...</option>
                </select>
            </div>

            <div id="admin-extra-field-random" class="admin-extra-field" style="display: none;">
                <label>Mes y a√±o a randomizar:</label>
                <input type="month" id="input-random-month" class="neo-input">
            </div>

            <div class="modal-actions">
                <button id="btn-confirmar-admin" class="btn-confirm"><span class="button_top">CONFIRMAR</span></button>
                <button onclick="document.getElementById('admin-modal').close()" class="btn-cancel"><span class="button_top">CANCELAR</span></button>
            </div>
        </div>
    </dialog>

    <dialog id="swap-modal">
        <div class="modal-content">
            <h2 id="swap-title">Intercambiar Tareas</h2>
            <p id="swap-msg">Selecciona el d√≠a y las dos personas que intercambiar√°n sus tareas.</p>
            
            <div class="admin-extra-field">
                <label>D√≠a del intercambio:</label>
                <input type="date" id="input-swap-date" class="neo-input">
            </div>
    
            <div class="admin-extra-field">
                <label>Persona 1:</label>
                <select id="select-swap-person1" class="neo-select">
                    <option value="">Cargando lista...</option>
                </select>
            </div>
    
            <div class="admin-extra-field">
                <label>Persona 2:</label>
                <select id="select-swap-person2" class="neo-select">
                    <option value="">Cargando lista...</option>
                </select>
            </div>
            
            <div class="modal-actions">
                <button id="btn-confirmar-swap" class="btn-confirm"><span class="button_top">CONFIRMAR</span></button>
                <button onclick="document.getElementById('swap-modal').close()" class="btn-cancel"><span class="button_top">CANCELAR</span></button>
            </div>
        </div>
    </dialog>

    <dialog id="absent-modal">
        <div class="modal-content">
            <h2 id="absent-title">Gestionar Ausencias</h2>
            <p id="absent-msg">Selecciona la persona y el rango de fechas de la ausencia.</p>
            
            <div class="admin-extra-field">
                <label>Persona:</label>
                <select id="select-absent-person" class="neo-select">
                    <option value="">Cargando lista...</option>
                </select>
            </div>
    
            <div class="admin-extra-field">
                <label>Desde:</label>
                <input type="date" id="input-absent-from" class="neo-input">
            </div>
    
            <div class="admin-extra-field">
                <label>Hasta:</label>
                <input type="date" id="input-absent-to" class="neo-input">
            </div>
            
            <div class="modal-actions">
                <button id="btn-confirmar-absent" class="btn-confirm"><span class="button_top">CONFIRMAR</span></button>
                <button onclick="document.getElementById('absent-modal').close()" class="btn-cancel"><span class="button_top">CANCELAR</span></button>
            </div>
        </div>
    </dialog>

    <dialog id="rules-modal">
        <div class="modal-content">
            <h2>Editar Reglas de Tareas</h2>
            <div id="rules-container">Cargando reglas...</div>
            <div class="modal-actions">
                <button id="btn-save-rules" class="btn-confirm"><span class="button_top">GUARDAR REGLAS</span></button>
                <button onclick="document.getElementById('rules-modal').close()" class="btn-cancel"><span class="button_top">CANCELAR</span></button>
            </div>
        </div>
    </dialog>

    <dialog id="admin-console-modal">
        <div class="modal-content">
            <h2>Consola Administrativa</h2>
            <div id="admin-console-password-section">
                <p>Ingresa la contrase√±a para acceder a la consola.</p>
                <input type="password" id="input-admin-console-password" placeholder="Contrase√±a">
                <div class="modal-actions">
                    <button id="btn-admin-console-login" class="btn-confirm"><span class="button_top">ACCEDER</span></button>
                    <button onclick="document.getElementById('admin-console-modal').close()" class="btn-cancel"><span class="button_top">CANCELAR</span></button>
                </div>
            </div>

            <div id="admin-console-content" style="display: none;">
                <!-- Admin functionalities will be moved here -->
                <div id="admin-actions-container">
                    <button onclick="abrirSeguridad('add')"><span class="button_top">+ AGREGAR</span></button>
                    <button class="btn-delete" onclick="abrirSeguridad('delete')"><span class="button_top">- ELIMINAR</span></button>
                    <button class="btn-regen" onclick="abrirSeguridad('random')"><span class="button_top">‚ö° RANDOMIZAR</span></button>
                    <button class="btn-swap" onclick="abrirSeguridad('swap')"><span class="button_top">üîÑ INTERCAMBIAR</span></button>
                    <button class="btn-absent" onclick="abrirSeguridad('absent')"><span class="button_top">üèñÔ∏è AUSENCIAS</span></button>
                    <button class="btn-rules" onclick="abrirSeguridad('rules')"><span class="button_top">üìù REGLAS</span></button>
                    <button onclick="mostrarRegistrosDeTiempo()"><span class="button_top">üïí REGISTROS DE HORARIOS</span></button>
                    </div>

                <div class="modal-actions">
                     <button id="btn-admin-console-log" class="btn-info"><span class="button_top">VER LOGS</span></button>
                    <button onclick="document.getElementById('admin-console-modal').close()" class="btn-cancel"><span class="button_top">CERRAR</span></button>
                </div>
            </div>
             <div id="log-viewer-modal" style="display: none;">
                <div class="modal-content">
                    <h2>Logs del Sistema</h2>
                    <div id="log-content"></div>
                    <button onclick="document.getElementById('log-viewer-modal').style.display = 'none'" class="btn-cancel"><span class="button_top">CERRAR</span></button>
                </div>
            </div>
        </div>
    </dialog>

    <dialog id="uniform-modal">
        <div class="modal-content">
            <h2>Uniformes de la Semana</h2>
            <div id="uniform-content"></div>
            <button onclick="document.getElementById('uniform-modal').close()" class="btn-cancel"><span class="button_top">CERRAR</span></button>
        </div>
    </dialog>


    <script type="module" src="js/app.js"></script>
</body>
</html>